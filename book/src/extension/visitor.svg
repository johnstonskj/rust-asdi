<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="692px" preserveAspectRatio="none" style="width:1096px;height:692px;background:#FFFFFF;" version="1.1" viewBox="0 0 1096 692" width="1096px" zoomAndPan="magnify"><defs><filter height="300%" id="f1t59nf6trdwfm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[e274c4916ac42ef1c11391a83d303c10]
cluster asdi--><polygon fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" points="93,6,129,6,136,28.4883,1017,28.4883,1017,578,93,578,93,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="93" x2="136" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="30" x="97" y="21.5352">asdi</text><!--MD5=[06db1a3c418c087d07f3ad85f7929579]
cluster asdi::visitor--><polygon fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" points="117,49,170,49,177,71.4883,901,71.4883,901,554,117,554,117,49" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="117" x2="177" y1="71.4883" y2="71.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="47" x="121" y="64.5352">visitor</text><!--MD5=[6bc3af5db4038e5494ba0622f07de59b]
cluster asdi::edb--><polygon fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" points="16,602,84,602,91,624.4883,348,624.4883,348,685,16,685,16,602" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="91" y1="624.4883" y2="624.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="62" x="20" y="617.5352">asdi::edb</text><!--MD5=[ae3c197a01158459eb2ddb806e23d6f2]
cluster asdi::idb--><polygon fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" points="508,602,573,602,580,624.4883,707,624.4883,707,685,508,685,508,602" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="508" x2="580" y1="624.4883" y2="624.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="59" x="512" y="617.5352">asdi::idb</text><!--MD5=[331bdf5c2291f41e90a08533bcc43e12]
cluster asdi::idb::query--><polygon fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" points="761,602,872,602,879,624.4883,978,624.4883,978,685,761,685,761,602" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="761" x2="879" y1="624.4883" y2="624.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105" x="765" y="617.5352">asdi::idb::query</text><!--MD5=[619a18f3975bec44ed0f3b908af212c9]
class asdi::Program--><rect codeLine="4" fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" height="32" id="asdi::Program" style="stroke:#A80036;stroke-width:1.5;" width="81" x="919.5" y="482.5"/><ellipse cx="934.5" cy="498.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M936.9731,504.6431 Q936.3921,504.9419 935.7529,505.0913 Q935.1138,505.2407 934.4082,505.2407 Q931.9014,505.2407 930.5815,503.5889 Q929.2617,501.937 929.2617,498.8159 Q929.2617,495.6865 930.5815,494.0347 Q931.9014,492.3828 934.4082,492.3828 Q935.1138,492.3828 935.7612,492.5322 Q936.4087,492.6816 936.9731,492.9805 L936.9731,495.7031 Q936.3423,495.1221 935.7488,494.8523 Q935.1553,494.5825 934.5244,494.5825 Q933.1797,494.5825 932.4949,495.6492 Q931.8101,496.7158 931.8101,498.8159 Q931.8101,500.9077 932.4949,501.9744 Q933.1797,503.041 934.5244,503.041 Q935.1553,503.041 935.7488,502.7712 Q936.3423,502.5015 936.9731,501.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="948.5" y="503.0352">Program</text><!--MD5=[b818c1bc739cda3d875bcb28854b99e7]
class asdi::visitor::ProgramVisitor--><rect codeLine="30" fill="#FEFECE" filter="url(#f1t59nf6trdwfm)" height="182.5059" id="asdi::visitor::ProgramVisitor" style="stroke:#A80036;stroke-width:1.5;" width="595" x="289.5" y="216"/><ellipse cx="534.25" cy="232" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M530.6777,228.2651 L530.6777,226.1069 L538.0571,226.1069 L538.0571,228.2651 L535.5918,228.2651 L535.5918,236.3418 L538.0571,236.3418 L538.0571,238.5 L530.6777,238.5 L530.6777,236.3418 L533.1431,236.3418 L533.1431,228.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="85" x="554.75" y="236.5352">ProgramVisitor</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="10" x="877.5" y="213"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="8" x="878.5" y="225.6016">T</text><line style="stroke:#A80036;stroke-width:1.5;" x1="290.5" x2="883.5" y1="248" y2="248"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="272" x="295.5" y="262.6348">start_program(program: &amp;Program) -&gt; Result&lt;T&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="255" x="295.5" y="275.5898">end_program(program: &amp;Program) : Result&lt;T&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="298.5" y="288.5449"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="583" x="295.5" y="301.5">start_relations(relations: &amp;RelationSet, extensional: bool) : Result&lt;Option&lt;Box&lt;dyn RelationVisitor&lt;T&gt;&gt;&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="352" x="295.5" y="314.4551">end_relations(visitor: Box&lt;dyn RelationVisitor&lt;T&gt;&gt;) : Result&lt;T&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="298.5" y="327.4102"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="425" x="295.5" y="340.3652">start_rules(relations: &amp;RuleSet) : Result&lt;Option&lt;Box&lt;dyn RuleVisitor&lt;T&gt;&gt;&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="312" x="295.5" y="353.3203">end_rules(visitor: Box&lt;dyn RuleVisitor&lt;T&gt;&gt;) : Result&lt;T&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="298.5" y="366.2754"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="451" x="295.5" y="379.2305">start_queries(queries: &amp;QuerySet) : Result&lt;Option&lt;Box&lt;dyn QueryVisitor&lt;T&gt;&gt;&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="335" x="295.5" y="392.1855">end_queries(visitor: Box&lt;dyn QueryVisitor&lt;T&gt;&gt;) : Result&lt;T&gt;</text><!--MD5=[8098a62c05abc4d56107425b2c373ae6]
class asdi::visitor::RelationVisitor--><rect codeLine="43" fill="#FEFECE" filter="url(#f1t59nf6trdwfm)" height="78.8652" id="asdi::visitor::RelationVisitor" style="stroke:#A80036;stroke-width:1.5;" width="257" x="133.5" y="459"/><ellipse cx="210.75" cy="475" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M207.1777,471.2651 L207.1777,469.1069 L214.5571,469.1069 L214.5571,471.2651 L212.0918,471.2651 L212.0918,479.3418 L214.5571,479.3418 L214.5571,481.5 L207.1777,481.5 L207.1777,479.3418 L209.6431,479.3418 L209.6431,471.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="82" x="231.25" y="479.5352">RelationVisitor</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="10" x="383.5" y="456"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="8" x="384.5" y="468.6016">T</text><line style="stroke:#A80036;stroke-width:1.5;" x1="134.5" x2="389.5" y1="491" y2="491"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="245" x="139.5" y="505.6348">start_relation(relation: &amp;Relation) : Result&lt;T&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="151" x="139.5" y="518.5898">fact(fact: &amp;Fact) : Result&lt;T&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="240" x="139.5" y="531.5449">end_relation(relation: &amp;Relation) : Result&lt;T&gt;</text><!--MD5=[6a568aeb1da860f079019b5e502c14d4]
class asdi::visitor::RuleVisitor--><rect codeLine="48" fill="#FEFECE" filter="url(#f1t59nf6trdwfm)" height="65.9102" id="asdi::visitor::RuleVisitor" style="stroke:#A80036;stroke-width:1.5;" width="197" x="425.5" y="465.5"/><ellipse cx="483.25" cy="481.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M479.6777,477.7651 L479.6777,475.6069 L487.0571,475.6069 L487.0571,477.7651 L484.5918,477.7651 L484.5918,485.8418 L487.0571,485.8418 L487.0571,488 L479.6777,488 L479.6777,485.8418 L482.1431,485.8418 L482.1431,477.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="61" x="503.75" y="486.0352">RuleVisitor</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="10" x="615.5" y="462.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="8" x="616.5" y="475.1016">T</text><line style="stroke:#A80036;stroke-width:1.5;" x1="426.5" x2="621.5" y1="497.5" y2="497.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="185" x="431.5" y="512.1348">start_rule(rule: &amp;Rule) : Result&lt;T&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="180" x="431.5" y="525.0898">end_rule(rule: &amp;Rule) : Result&lt;T&gt;</text><!--MD5=[bb4106a81d1aaded467b52484c9a24ed]
class asdi::visitor::QueryVisitor--><rect codeLine="52" fill="#FEFECE" filter="url(#f1t59nf6trdwfm)" height="65.9102" id="asdi::visitor::QueryVisitor" style="stroke:#A80036;stroke-width:1.5;" width="227" x="657.5" y="465.5"/><ellipse cx="725.75" cy="481.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M722.1777,477.7651 L722.1777,475.6069 L729.5571,475.6069 L729.5571,477.7651 L727.0918,477.7651 L727.0918,485.8418 L729.5571,485.8418 L729.5571,488 L722.1777,488 L722.1777,485.8418 L724.6431,485.8418 L724.6431,477.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="70" x="746.25" y="486.0352">QueryVisitor</text><rect fill="#FFFFFF" height="16.1328" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="10" x="877.5" y="462.5"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="8" x="878.5" y="475.1016">T</text><line style="stroke:#A80036;stroke-width:1.5;" x1="658.5" x2="883.5" y1="497.5" y2="497.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="215" x="663.5" y="512.1348">start_query(query: &amp;Query) : Result&lt;T&gt;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="210" x="663.5" y="525.0898">end_query(query: &amp;Query) : Result&lt;T&gt;</text><!--MD5=[7e3a4c3bb1c98ce5cae9b948d2a61d3f]
class asdi::visitor::features--><rect codeLine="72" fill="#FEFECE" filter="url(#f1t59nf6trdwfm)" height="72.1758" id="asdi::visitor::features" style="stroke:#A80036;stroke-width:1.5;" width="150" x="512" y="84"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="55" x="559.5" y="100.6016">«module»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47" x="563.5" y="114.7344">features</text><line style="stroke:#A80036;stroke-width:1.5;" x1="513" x2="661" y1="122.2656" y2="122.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="138" x="518" y="136.9004">format_program() : String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="124" x="518" y="149.8555">visit_program&lt;T&gt;() : T</text><!--MD5=[6137f69857c1321f4d06c717c9c09db2]
class asdi::edb::RelationSet--><rect codeLine="7" fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" height="32" id="asdi::edb::RelationSet" style="stroke:#A80036;stroke-width:1.5;" width="95" x="32.5" y="637"/><ellipse cx="47.5" cy="653" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M49.9731,659.1431 Q49.3921,659.4419 48.7529,659.5913 Q48.1138,659.7407 47.4082,659.7407 Q44.9014,659.7407 43.5815,658.0889 Q42.2617,656.437 42.2617,653.3159 Q42.2617,650.1865 43.5815,648.5347 Q44.9014,646.8828 47.4082,646.8828 Q48.1138,646.8828 48.7612,647.0322 Q49.4087,647.1816 49.9731,647.4805 L49.9731,650.2031 Q49.3423,649.6221 48.7488,649.3523 Q48.1553,649.0825 47.5244,649.0825 Q46.1797,649.0825 45.4949,650.1492 Q44.8101,651.2158 44.8101,653.3159 Q44.8101,655.4077 45.4949,656.4744 Q46.1797,657.541 47.5244,657.541 Q48.1553,657.541 48.7488,657.2712 Q49.3423,657.0015 49.9731,656.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="63" x="61.5" y="657.5352">RelationSet</text><!--MD5=[63be3a1481beaba15f9dd2bbcd4a53e1]
class asdi::edb::Relation--><rect codeLine="10" fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" height="32" id="asdi::edb::Relation" style="stroke:#A80036;stroke-width:1.5;" width="78" x="163" y="637"/><ellipse cx="178" cy="653" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M180.4731,659.1431 Q179.8921,659.4419 179.2529,659.5913 Q178.6138,659.7407 177.9082,659.7407 Q175.4014,659.7407 174.0815,658.0889 Q172.7617,656.437 172.7617,653.3159 Q172.7617,650.1865 174.0815,648.5347 Q175.4014,646.8828 177.9082,646.8828 Q178.6138,646.8828 179.2612,647.0322 Q179.9087,647.1816 180.4731,647.4805 L180.4731,650.2031 Q179.8423,649.6221 179.2488,649.3523 Q178.6553,649.0825 178.0244,649.0825 Q176.6797,649.0825 175.9949,650.1492 Q175.3101,651.2158 175.3101,653.3159 Q175.3101,655.4077 175.9949,656.4744 Q176.6797,657.541 178.0244,657.541 Q178.6553,657.541 179.2488,657.2712 Q179.8423,657.0015 180.4731,656.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="46" x="192" y="657.5352">Relation</text><!--MD5=[b01c1280d4e10e5850c2de04b0afedc0]
class asdi::edb::Fact--><rect codeLine="13" fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" height="32" id="asdi::edb::Fact" style="stroke:#A80036;stroke-width:1.5;" width="55" x="276.5" y="637"/><ellipse cx="291.5" cy="653" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M293.9731,659.1431 Q293.3921,659.4419 292.7529,659.5913 Q292.1138,659.7407 291.4082,659.7407 Q288.9014,659.7407 287.5815,658.0889 Q286.2617,656.437 286.2617,653.3159 Q286.2617,650.1865 287.5815,648.5347 Q288.9014,646.8828 291.4082,646.8828 Q292.1138,646.8828 292.7612,647.0322 Q293.4087,647.1816 293.9731,647.4805 L293.9731,650.2031 Q293.3423,649.6221 292.7488,649.3523 Q292.1553,649.0825 291.5244,649.0825 Q290.1797,649.0825 289.4949,650.1492 Q288.8101,651.2158 288.8101,653.3159 Q288.8101,655.4077 289.4949,656.4744 Q290.1797,657.541 291.5244,657.541 Q292.1553,657.541 292.7488,657.2712 Q293.3423,657.0015 293.9731,656.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="23" x="305.5" y="657.5352">Fact</text><!--MD5=[30c8d4c59bd3776484494cc31a150236]
class asdi::idb::RuleSet--><rect codeLine="16" fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" height="32" id="asdi::idb::RuleSet" style="stroke:#A80036;stroke-width:1.5;" width="74" x="617" y="637"/><ellipse cx="632" cy="653" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M634.4731,659.1431 Q633.8921,659.4419 633.2529,659.5913 Q632.6138,659.7407 631.9082,659.7407 Q629.4014,659.7407 628.0815,658.0889 Q626.7617,656.437 626.7617,653.3159 Q626.7617,650.1865 628.0815,648.5347 Q629.4014,646.8828 631.9082,646.8828 Q632.6138,646.8828 633.2612,647.0322 Q633.9087,647.1816 634.4731,647.4805 L634.4731,650.2031 Q633.8423,649.6221 633.2488,649.3523 Q632.6553,649.0825 632.0244,649.0825 Q630.6797,649.0825 629.9949,650.1492 Q629.3101,651.2158 629.3101,653.3159 Q629.3101,655.4077 629.9949,656.4744 Q630.6797,657.541 632.0244,657.541 Q632.6553,657.541 633.2488,657.2712 Q633.8423,657.0015 634.4731,656.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="646" y="657.5352">RuleSet</text><!--MD5=[afabf50c567fddf1e22749c2d45d6bf2]
class asdi::idb::Rule--><rect codeLine="19" fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" height="32" id="asdi::idb::Rule" style="stroke:#A80036;stroke-width:1.5;" width="57" x="524.5" y="637"/><ellipse cx="539.5" cy="653" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M541.9731,659.1431 Q541.3921,659.4419 540.7529,659.5913 Q540.1138,659.7407 539.4082,659.7407 Q536.9014,659.7407 535.5815,658.0889 Q534.2617,656.437 534.2617,653.3159 Q534.2617,650.1865 535.5815,648.5347 Q536.9014,646.8828 539.4082,646.8828 Q540.1138,646.8828 540.7612,647.0322 Q541.4087,647.1816 541.9731,647.4805 L541.9731,650.2031 Q541.3423,649.6221 540.7488,649.3523 Q540.1553,649.0825 539.5244,649.0825 Q538.1797,649.0825 537.4949,650.1492 Q536.8101,651.2158 536.8101,653.3159 Q536.8101,655.4077 537.4949,656.4744 Q538.1797,657.541 539.5244,657.541 Q540.1553,657.541 540.7488,657.2712 Q541.3423,657.0015 541.9731,656.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="25" x="553.5" y="657.5352">Rule</text><!--MD5=[862f5ba143deaa96c11c433d25830988]
class asdi::idb::query::QuerySet--><rect codeLine="22" fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" height="32" id="asdi::idb::query::QuerySet" style="stroke:#A80036;stroke-width:1.5;" width="83" x="878.5" y="637"/><ellipse cx="893.5" cy="653" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M895.9731,659.1431 Q895.3921,659.4419 894.7529,659.5913 Q894.1138,659.7407 893.4082,659.7407 Q890.9014,659.7407 889.5815,658.0889 Q888.2617,656.437 888.2617,653.3159 Q888.2617,650.1865 889.5815,648.5347 Q890.9014,646.8828 893.4082,646.8828 Q894.1138,646.8828 894.7612,647.0322 Q895.4087,647.1816 895.9731,647.4805 L895.9731,650.2031 Q895.3423,649.6221 894.7488,649.3523 Q894.1553,649.0825 893.5244,649.0825 Q892.1797,649.0825 891.4949,650.1492 Q890.8101,651.2158 890.8101,653.3159 Q890.8101,655.4077 891.4949,656.4744 Q892.1797,657.541 893.5244,657.541 Q894.1553,657.541 894.7488,657.2712 Q895.3423,657.0015 895.9731,656.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="907.5" y="657.5352">QuerySet</text><!--MD5=[942727c1e5dca949354fc2e6ef4102b1]
class asdi::idb::query::Query--><rect codeLine="25" fill="#FFFFFF" filter="url(#f1t59nf6trdwfm)" height="32" id="asdi::idb::query::Query" style="stroke:#A80036;stroke-width:1.5;" width="66" x="777" y="637"/><ellipse cx="792" cy="653" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M794.4731,659.1431 Q793.8921,659.4419 793.2529,659.5913 Q792.6138,659.7407 791.9082,659.7407 Q789.4014,659.7407 788.0815,658.0889 Q786.7617,656.437 786.7617,653.3159 Q786.7617,650.1865 788.0815,648.5347 Q789.4014,646.8828 791.9082,646.8828 Q792.6138,646.8828 793.2612,647.0322 Q793.9087,647.1816 794.4731,647.4805 L794.4731,650.2031 Q793.8423,649.6221 793.2488,649.3523 Q792.6553,649.0825 792.0244,649.0825 Q790.6797,649.0825 789.9949,650.1492 Q789.3101,651.2158 789.3101,653.3159 Q789.3101,655.4077 789.9949,656.4744 Q790.6797,657.541 792.0244,657.541 Q792.6553,657.541 793.2488,657.2712 Q793.8423,657.0015 794.4731,656.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="806" y="657.5352">Query</text><!--MD5=[494ff9e1f6b2511c5f41c87db7237760]
link asdi::visitor::ProgramVisitor to asdi::visitor::RelationVisitor--><path codeLine="57" d="M431.16,399.12 C396.83,419.09 362.11,439.28 333.13,456.14 " fill="none" id="asdi::visitor::ProgramVisitor-to-asdi::visitor::RelationVisitor" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="328.53,458.81,338.3199,457.7343,332.8499,456.2924,334.2918,450.8224,328.53,458.81" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[429d92fbb8a463e9b3c688f6a05e31b4]
link asdi::visitor::ProgramVisitor to asdi::visitor::RuleVisitor--><path codeLine="58" d="M556.79,399.12 C549.58,420.77 542.27,442.69 536.39,460.33 " fill="none" id="asdi::visitor::ProgramVisitor-to-asdi::visitor::RuleVisitor" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="534.77,465.19,541.4174,457.9228,536.3554,460.448,533.8302,455.3861,534.77,465.19" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2f2dc5c170bebb2245ea3bf117959349]
link asdi::visitor::ProgramVisitor to asdi::visitor::QueryVisitor--><path codeLine="59" d="M675.23,399.12 C696.66,421.14 718.37,443.44 735.69,461.23 " fill="none" id="asdi::visitor::ProgramVisitor-to-asdi::visitor::QueryVisitor" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="739.54,465.19,736.1348,455.9485,736.0548,461.6048,730.3985,461.5248,739.54,465.19" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fccae2c952d872fc837ebfd756b62f6a]
link asdi::visitor::ProgramVisitor to asdi::Program--><path codeLine="60" d="M786.26,399.14 C824.79,418.03 864.52,438.47 901,459 C912.1,465.25 923.93,472.78 934.06,479.52 " fill="none" id="asdi::visitor::ProgramVisitor-to-asdi::Program" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="938.29,482.36,933.0401,474.027,934.1363,479.5766,928.5867,480.6728,938.29,482.36" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7d21a56532394ad80200003b95573428]
link asdi::visitor::ProgramVisitor to asdi::edb::RelationSet--><path codeLine="61" d="M289.36,351.18 C224.27,373.6 161.37,407.58 116,459 C72.58,508.21 74.11,592.56 77.54,631.37 " fill="none" id="asdi::visitor::ProgramVisitor-to-asdi::edb::RelationSet" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="78.05,636.75,81.185,627.4134,77.5793,631.7722,73.2205,628.1665,78.05,636.75" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[61010bdf44063d3a25c246bd67ab3326]
link asdi::visitor::ProgramVisitor to asdi::idb::RuleSet--><path codeLine="62" d="M884.66,358.7 C936.63,381 984.39,413.04 1017,459 C1049.66,505.04 1056.28,545.47 1017,586 C1007.1,596.22 774.74,590.29 761,594 C730.91,602.13 699.97,620.15 679.15,633.96 " fill="none" id="asdi::visitor::ProgramVisitor-to-asdi::idb::RuleSet" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="674.87,636.84,684.5706,635.1374,679.0192,634.05,680.1066,628.4987,674.87,636.84" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a4381fc6c5dbf6bbe14a3f8ab6711557]
link asdi::visitor::ProgramVisitor to asdi::idb::query::QuerySet--><path codeLine="63" d="M884.6,374.11 C962.98,397.69 1032.35,426.57 1056,459 C1089.26,504.6 1085.96,538.16 1056,586 C1036.5,617.14 997.65,633.96 966.45,642.81 " fill="none" id="asdi::visitor::ProgramVisitor-to-asdi::idb::query::QuerySet" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="961.51,644.16,971.2446,645.6559,966.3345,642.8468,969.1435,637.9367,961.51,644.16" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[64f43929574ac4a3026f4fd533c4b461]
link asdi::visitor::RelationVisitor to asdi::edb::Relation--><path codeLine="65" d="M246.7,538.38 C234.97,568.2 219.25,608.16 209.92,631.88 " fill="none" id="asdi::visitor::RelationVisitor-to-asdi::edb::Relation" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="208.03,636.68,215.0426,629.7645,209.8574,632.0259,207.596,626.8407,208.03,636.68" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7fbb9a839cdace1002511cf9afc6f310]
link asdi::visitor::RelationVisitor to asdi::edb::Fact--><path codeLine="66" d="M272.71,538.38 C280.89,568.08 291.83,607.82 298.38,631.58 " fill="none" id="asdi::visitor::RelationVisitor-to-asdi::edb::Fact" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="299.78,636.68,301.2417,626.9402,298.4499,631.8602,293.5299,629.0684,299.78,636.68" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7e12fd5c91ccc392961c21c89e14048a]
link asdi::visitor::RuleVisitor to asdi::idb::Rule--><path codeLine="68" d="M530.15,531.84 C535.89,562.04 544.29,606.19 549.14,631.71 " fill="none" id="asdi::visitor::RuleVisitor-to-asdi::idb::Rule" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="550.12,636.86,552.3794,627.2738,549.1917,631.9469,544.5185,628.7592,550.12,636.86" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ecb9e238fbfdf9c43098799f4d0110c5]
link asdi::visitor::QueryVisitor to asdi::idb::query::Query--><path codeLine="70" d="M779.27,531.84 C786.99,562.04 798.28,606.19 804.81,631.71 " fill="none" id="asdi::visitor::QueryVisitor-to-asdi::idb::query::Query" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="806.13,636.86,807.8009,627.1539,804.9039,632.0127,800.0452,629.1157,806.13,636.86" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ca3cb38358d6aacb05b730d9d4362850]
link asdi::visitor::features to asdi::visitor::ProgramVisitor--><path codeLine="77" d="M587,156.33 C587,171.89 587,191.02 587,210.34 " fill="none" id="asdi::visitor::features-to-asdi::visitor::ProgramVisitor" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="587,215.79,591,206.79,587,210.79,583,206.79,587,215.79" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d80fbed024667a35a1c6fa61ef26e60f]
@startuml

!include ../model/options.plantuml

class asdi::Program #white
hide "asdi::Program" members

class asdi::edb::RelationSet #white
hide "asdi::edb::RelationSet" members

class asdi::edb::Relation #white
hide "asdi::edb::Relation" members

class asdi::edb::Fact #white
hide "asdi::edb::Fact" members

class asdi::idb::RuleSet #white
hide "asdi::idb::RuleSet" members

class asdi::idb::Rule #white
hide "asdi::idb::Rule" members

class asdi::idb::query::QuerySet #white
hide "asdi::idb::query::QuerySet" members

class asdi::idb::query::Query #white
hide "asdi::idb::query::Query" members

namespace asdi::visitor {

    interface ProgramVisitor<T> {
        start_program(program: &Program) -> Result<T>
        end_program(program: &Program) : Result<T>

        start_relations(relations: &RelationSet, extensional: bool) : Result<Option<Box<dyn RelationVisitor<T>>>>
        end_relations(visitor: Box<dyn RelationVisitor<T>>) : Result<T>

        start_rules(relations: &RuleSet) : Result<Option<Box<dyn RuleVisitor<T>>>>
        end_rules(visitor: Box<dyn RuleVisitor<T>>) : Result<T>

        start_queries(queries: &QuerySet) : Result<Option<Box<dyn QueryVisitor<T>>>>
        end_queries(visitor: Box<dyn QueryVisitor<T>>) : Result<T>
    }
    interface RelationVisitor<T> {
        start_relation(relation: &Relation) : Result<T>
        fact(fact: &Fact) : Result<T>
        end_relation(relation: &Relation) : Result<T>
    }
    interface RuleVisitor<T> {
        start_rule(rule: &Rule) : Result<T>
        end_rule(rule: &Rule) : Result<T>
    }
    interface QueryVisitor<T> {
        start_query(query: &Query) : Result<T>
        end_query(query: &Query) : Result<T>
    }

    ProgramVisitor ..> RelationVisitor
    ProgramVisitor ..> RuleVisitor
    ProgramVisitor ..> QueryVisitor
    ProgramVisitor ..> asdi::Program
    ProgramVisitor ..> asdi::edb::RelationSet
    ProgramVisitor ..> asdi::idb::RuleSet
    ProgramVisitor ..> asdi::idb::query::QuerySet

    RelationVisitor ..> asdi::edb::Relation
    RelationVisitor ..> asdi::edb::Fact

    RuleVisitor ..> asdi::idb::Rule

    QueryVisitor ..> asdi::idb::query::Query

    class features << module >> {
        format_program() : String
        visit_program<T>() : T
    }

    features ..> ProgramVisitor
}

@enduml

@startuml

set namespaceSeparator ::
hide enum methods
hide interface fields
hide << const >> members
hide << type >> members
hide << type >> stereotype
hide << module >> fields
hide << module >> circle

class asdi::Program #white
hide "asdi::Program" members

class asdi::edb::RelationSet #white
hide "asdi::edb::RelationSet" members

class asdi::edb::Relation #white
hide "asdi::edb::Relation" members

class asdi::edb::Fact #white
hide "asdi::edb::Fact" members

class asdi::idb::RuleSet #white
hide "asdi::idb::RuleSet" members

class asdi::idb::Rule #white
hide "asdi::idb::Rule" members

class asdi::idb::query::QuerySet #white
hide "asdi::idb::query::QuerySet" members

class asdi::idb::query::Query #white
hide "asdi::idb::query::Query" members

namespace asdi::visitor {

    interface ProgramVisitor<T> {
        start_program(program: &Program) -> Result<T>
        end_program(program: &Program) : Result<T>

        start_relations(relations: &RelationSet, extensional: bool) : Result<Option<Box<dyn RelationVisitor<T>>>>
        end_relations(visitor: Box<dyn RelationVisitor<T>>) : Result<T>

        start_rules(relations: &RuleSet) : Result<Option<Box<dyn RuleVisitor<T>>>>
        end_rules(visitor: Box<dyn RuleVisitor<T>>) : Result<T>

        start_queries(queries: &QuerySet) : Result<Option<Box<dyn QueryVisitor<T>>>>
        end_queries(visitor: Box<dyn QueryVisitor<T>>) : Result<T>
    }
    interface RelationVisitor<T> {
        start_relation(relation: &Relation) : Result<T>
        fact(fact: &Fact) : Result<T>
        end_relation(relation: &Relation) : Result<T>
    }
    interface RuleVisitor<T> {
        start_rule(rule: &Rule) : Result<T>
        end_rule(rule: &Rule) : Result<T>
    }
    interface QueryVisitor<T> {
        start_query(query: &Query) : Result<T>
        end_query(query: &Query) : Result<T>
    }

    ProgramVisitor ..> RelationVisitor
    ProgramVisitor ..> RuleVisitor
    ProgramVisitor ..> QueryVisitor
    ProgramVisitor ..> asdi::Program
    ProgramVisitor ..> asdi::edb::RelationSet
    ProgramVisitor ..> asdi::idb::RuleSet
    ProgramVisitor ..> asdi::idb::query::QuerySet

    RelationVisitor ..> asdi::edb::Relation
    RelationVisitor ..> asdi::edb::Fact

    RuleVisitor ..> asdi::idb::Rule

    QueryVisitor ..> asdi::idb::query::Query

    class features << module >> {
        format_program() : String
        visit_program<T>() : T
    }

    features ..> ProgramVisitor
}

@enduml

PlantUML version 1.2022.1(Tue Feb 01 10:19:58 PST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>